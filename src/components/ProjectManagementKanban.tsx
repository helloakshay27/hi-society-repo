import { useAppSelector, useAppDispatch } from "@/store/hooks";
import KanbanBoard from "./KanbanBoard";
import ProjectCard from "./ProjectCard";
import { DndContext, DragEndEvent, closestCorners, DragStartEvent, DragOverlay } from "@dnd-kit/core";
import { changeProjectStatus } from "@/store/slices/projectManagementSlice";
import { useCallback, useState } from "react";

export const cardsTitle = [
    {
        id: 1,
        title: "Overdue",
        color: "#FF2733",
        add: false,
    },
    {
        id: 2,
        title: "Open",
        color: "#E4636A",
        add: true,
    },
    {
        id: 3,
        title: "In Progress",
        color: "#08AEEA",
        add: true,
    },
    {
        id: 4,
        title: "On Hold",
        color: "#7BD2B5",
        add: true,
    },
    {
        id: 5,
        title: "Completed",
        color: "#83D17A",
        add: false,
    },
];

const ProjectManagementKanban = () => {
    const { data } = useAppSelector((state) => state.filterProjects);
    const dispatch = useAppDispatch();
    const token = localStorage.getItem("token");
    const baseUrl = localStorage.getItem("baseUrl");

    // Track dragging and project updates
    const [draggedProjectId, setDraggedProjectId] = useState<string | null>(null);
    const [droppedProjects, setDroppedProjects] = useState<{ [key: string]: string }>({});

    const handleDragStart = useCallback((event: DragStartEvent) => {
        const activeData = event.active.data.current;
        if (activeData?.type === "PROJECT") {
            setDraggedProjectId(activeData.projectId.toString());
        }
    }, []);

    const handleDragEnd = useCallback((event: DragEndEvent) => {
        const { active, over } = event;
        setDraggedProjectId(null);

        if (!over) return;

        const activeData = active.data.current;
        const overData = over.data.current;

        // Check if we're dragging a project over a kanban column
        if (activeData?.type === "PROJECT" && overData?.type === "KANBAN_COLUMN") {
            const projectId = activeData.projectId;
            const project = activeData.project;
            const newStatus = overData.title;

            // Don't update if dropping in the same column
            if (project.status === newStatus || (newStatus === "active" && project.status === "open")) {
                return;
            }

            // Update local state to show visual feedback immediately
            const statusMap: { [key: string]: string } = {
                "overdue": "overdue",
                "open": "active",
                "in_progress": "in_progress",
                "on_hold": "on_hold",
                "completed": "completed"
            };

            const apiStatus = statusMap[newStatus] || newStatus;

            // Store the dropped project with its new status for optimistic update
            setDroppedProjects(prev => ({
                ...prev,
                [projectId]: apiStatus
            }));

            // Call API to update project status
            if (token && baseUrl && projectId) {
                dispatch(changeProjectStatus({
                    token,
                    baseUrl,
                    id: projectId.toString(),
                    payload: { status: apiStatus }
                }));
            }
        }
    }, [dispatch, token, baseUrl]);

    return (
        <div className="relative">
            <DndContext
                collisionDetection={closestCorners}
                onDragStart={handleDragStart}
                onDragEnd={handleDragEnd}
            >
                <div
                    className="h-[80%] my-3 flex items-start gap-1 max-w-full overflow-x-auto overflow-y-auto flex-nowrap"
                    style={{ height: "75vh" }}
                >
                    {cardsTitle.map((card) => {
                        const cardStatus = card.title.toLowerCase().replace(" ", "_");

                        const filteredProjects =
                            Array.isArray(data) &&
                            data.filter((project) => {
                                // Check if this project was dropped with a new status
                                const droppedStatus = droppedProjects[project.id];
                                const projectStatus = droppedStatus || project.status;

                                // Map "open" to "active" for comparison
                                const normalizedCardStatus = cardStatus === "open" ? "active" : cardStatus;

                                return projectStatus === normalizedCardStatus;
                            });

                        return (
                            <KanbanBoard
                                key={card.id}
                                add={card.add}
                                color={card.color}
                                count={0}
                                title={card.title}
                            >
                                {filteredProjects.length > 0 ? (
                                    (filteredProjects || []).map((project) => (
                                        <div
                                            key={project.id}
                                            id={`project-${project.id}`}
                                            className="relative"
                                        >
                                            <ProjectCard project={project} />
                                        </div>
                                    ))
                                ) : (
                                    <svg
                                        width="235"
                                        height="290"
                                        viewBox="0 0 264 290"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <rect width="121.359" height="69" rx="2" fill="#F9F9F9" />
                                        <rect
                                            y="84"
                                            width="121.359"
                                            height="69"
                                            rx="2"
                                            fill="#F9F9F9"
                                        />
                                        <rect
                                            x="140.777"
                                            width="121.359"
                                            height="69"
                                            rx="2"
                                            fill="#F9F9F9"
                                        />
                                        <rect
                                            x="0.483462"
                                            y="0.516965"
                                            width="120.363"
                                            height="67.9978"
                                            rx="1.5"
                                            transform="matrix(0.999406 0.034457 -0.0324812 0.999472 142.061 84.9836)"
                                            stroke="#8C8C8C"
                                            stroke-dasharray="2 2"
                                        />
                                        <path
                                            d="M27.8544 207.08C29.1184 207.08 30.0904 207.416 30.7704 208.088C31.4584 208.752 31.8024 209.716 31.8024 210.98C31.8024 212.284 31.4584 213.28 30.7704 213.968C30.0904 214.656 29.1184 215 27.8544 215H25.3584V207.08H27.8544ZM27.9024 214.448C28.9584 214.448 29.7664 214.148 30.3264 213.548C30.8944 212.948 31.1784 212.092 31.1784 210.98C31.1784 209.908 30.8944 209.084 30.3264 208.508C29.7664 207.924 28.9584 207.632 27.9024 207.632H25.9584V214.448H27.9024ZM33.5807 215V209H34.0847L34.1567 210.26C34.3087 209.836 34.5527 209.5 34.8887 209.252C35.2247 209.004 35.6287 208.88 36.1007 208.88C36.2607 208.88 36.4047 208.896 36.5327 208.928C36.6607 208.96 36.7647 209.012 36.8447 209.084L36.7127 209.612C36.6247 209.556 36.5287 209.512 36.4247 209.48C36.3207 209.448 36.1647 209.432 35.9567 209.432C35.6527 209.432 35.3647 209.528 35.0927 209.72C34.8207 209.904 34.6007 210.164 34.4327 210.5C34.2647 210.828 34.1807 211.208 34.1807 211.64V215H33.5807ZM41.6355 211.052C41.6355 210.532 41.4955 210.128 41.2155 209.84C40.9355 209.552 40.5355 209.408 40.0155 209.408C39.5595 209.408 39.1675 209.508 38.8395 209.708C38.5115 209.9 38.2675 210.224 38.1075 210.68L37.6155 210.368C37.7915 209.896 38.0835 209.532 38.4915 209.276C38.9075 209.012 39.4195 208.88 40.0275 208.88C40.4675 208.88 40.8515 208.96 41.1795 209.12C41.5155 209.272 41.7755 209.5 41.9595 209.804C42.1435 210.108 42.2355 210.488 42.2355 210.944V213.944C42.2355 214.368 42.4275 214.58 42.8115 214.58C42.9795 214.58 43.1235 214.552 43.2435 214.496L43.2075 214.976C43.0715 215.048 42.8955 215.084 42.6795 215.084C42.4955 215.084 42.3235 215.048 42.1635 214.976C42.0035 214.904 41.8715 214.784 41.7675 214.616C41.6715 214.448 41.6235 214.22 41.6235 213.932V213.608L41.7915 213.596C41.7195 213.94 41.5595 214.228 41.3115 214.46C41.0715 214.684 40.7915 214.852 40.4715 214.964C40.1515 215.068 39.8315 215.12 39.5115 215.12C39.1355 215.12 38.7995 215.06 38.5035 214.94C38.2075 214.82 37.9755 214.648 37.8075 214.424C37.6395 214.192 37.5555 213.908 37.5555 213.572C37.5555 213.124 37.7035 212.764 37.9995 212.492C38.3035 212.212 38.7275 212.02 39.2715 211.916L41.7555 211.424V211.928L39.5715 212.36C39.0995 212.456 38.7475 212.596 38.5155 212.78C38.2835 212.964 38.1675 213.216 38.1675 213.536C38.1675 213.864 38.2915 214.124 38.5395 214.316C38.7875 214.5 39.1395 214.592 39.5955 214.592C39.8275 214.592 40.0635 214.56 40.3035 214.496C40.5435 214.432 40.7635 214.332 40.9635 214.196C41.1715 214.052 41.3355 213.876 41.4555 213.668C41.5755 213.452 41.6355 213.192 41.6355 212.888V211.052ZM49.4471 207.896L49.5911 208.424C49.5831 208.424 49.5751 208.424 49.5671 208.424C49.5591 208.424 49.5471 208.424 49.5311 208.424C49.1391 208.424 48.8351 208.528 48.6191 208.736C48.4111 208.936 48.3071 209.22 48.3071 209.588L47.9231 209.396C47.9231 209.092 47.9871 208.828 48.1151 208.604C48.2431 208.38 48.4191 208.208 48.6431 208.088C48.8671 207.96 49.1191 207.896 49.3991 207.896C49.4151 207.896 49.4231 207.896 49.4231 207.896C49.4311 207.896 49.4391 207.896 49.4471 207.896ZM47.5511 214.388C48.1431 214.388 48.6071 214.512 48.9431 214.76C49.2791 215.008 49.4471 215.34 49.4471 215.756C49.4471 216.124 49.3231 216.444 49.0751 216.716C48.8351 216.988 48.5031 217.2 48.0791 217.352C47.6551 217.504 47.1711 217.58 46.6271 217.58C45.7231 217.58 45.0311 217.424 44.5511 217.112C44.0711 216.808 43.8311 216.424 43.8311 215.96C43.8311 215.624 43.9511 215.332 44.1911 215.084C44.4391 214.836 44.7991 214.688 45.2711 214.64L45.2231 214.748C44.9671 214.676 44.7391 214.556 44.5391 214.388C44.3471 214.22 44.2511 213.98 44.2511 213.668C44.2511 213.332 44.3751 213.06 44.6231 212.852C44.8791 212.636 45.2151 212.512 45.6311 212.48L46.2671 212.696H46.0151C45.6471 212.72 45.3511 212.812 45.1271 212.972C44.9111 213.124 44.8031 213.324 44.8031 213.572C44.8031 213.844 44.9071 214.048 45.1151 214.184C45.3311 214.32 45.6031 214.388 45.9311 214.388H47.5511ZM46.6271 217.076C47.0991 217.076 47.5031 217.02 47.8391 216.908C48.1751 216.796 48.4311 216.644 48.6071 216.452C48.7911 216.268 48.8831 216.06 48.8831 215.828C48.8831 215.548 48.7591 215.324 48.5111 215.156C48.2711 214.988 47.9031 214.904 47.4071 214.904H45.7031C45.3271 214.904 45.0151 214.992 44.7671 215.168C44.5191 215.344 44.3951 215.58 44.3951 215.876C44.3951 216.236 44.5911 216.524 44.9831 216.74C45.3831 216.964 45.9311 217.076 46.6271 217.076ZM46.5431 208.88C47.0151 208.88 47.4311 208.964 47.7911 209.132C48.1591 209.292 48.4431 209.52 48.6431 209.816C48.8431 210.104 48.9431 210.444 48.9431 210.836C48.9431 211.22 48.8431 211.564 48.6431 211.868C48.4431 212.164 48.1591 212.396 47.7911 212.564C47.4311 212.724 47.0151 212.804 46.5431 212.804C45.7831 212.804 45.1871 212.624 44.7551 212.264C44.3311 211.896 44.1191 211.42 44.1191 210.836C44.1191 210.444 44.2191 210.104 44.4191 209.816C44.6271 209.52 44.9111 209.292 45.2711 209.132C45.6391 208.964 46.0631 208.88 46.5431 208.88ZM46.5431 209.372C46.0151 209.372 45.5831 209.508 45.2471 209.78C44.9111 210.044 44.7431 210.396 44.7431 210.836C44.7431 211.276 44.9111 211.632 45.2471 211.904C45.5831 212.176 46.0151 212.312 46.5431 212.312C47.0711 212.312 47.4991 212.176 47.8271 211.904C48.1631 211.632 48.3311 211.276 48.3311 210.836C48.3311 210.396 48.1631 210.044 47.8271 209.78C47.4991 209.508 47.0711 209.372 46.5431 209.372ZM58.0886 211.052C58.0886 210.532 57.9486 210.128 57.6686 209.84C57.3886 209.552 56.9886 209.408 56.4686 209.408C56.0126 209.408 55.6206 209.508 55.2926 209.708C54.9646 209.9 54.7206 210.224 54.5606 210.68L54.0686 210.368C54.2446 209.896 54.5366 209.532 54.9446 209.276C55.3606 209.012 55.8726 208.88 56.4806 208.88C56.9206 208.88 57.3046 208.96 57.6326 209.12C57.9686 209.272 58.2286 209.5 58.4126 209.804C58.5966 210.108 58.6886 210.488 58.6886 210.944V213.944C58.6886 214.368 58.8806 214.58 59.2646 214.58C59.4326 214.58 59.5766 214.552 59.6966 214.496L59.6606 214.976C59.5246 215.048 59.3486 215.084 59.1326 215.084C58.9486 215.084 58.7766 215.048 58.6166 214.976C58.4566 214.904 58.3246 214.784 58.2206 214.616C58.1246 214.448 58.0766 214.22 58.0766 213.932V213.608L58.2446 213.596C58.1726 213.94 58.0126 214.228 57.7646 214.46C57.5246 214.684 57.2446 214.852 56.9246 214.964C56.6046 215.068 56.2846 215.12 55.9646 215.12C55.5886 215.12 55.2526 215.06 54.9566 214.94C54.6606 214.82 54.4286 214.648 54.2606 214.424C54.0926 214.192 54.0086 213.908 54.0086 213.572C54.0086 213.124 54.1566 212.764 54.4526 212.492C54.7566 212.212 55.1806 212.02 55.7246 211.916L58.2086 211.424V211.928L56.0246 212.36C55.5526 212.456 55.2006 212.596 54.9686 212.78C54.7366 212.964 54.6206 213.216 54.6206 213.536C54.6206 213.864 54.7446 214.124 54.9926 214.316C55.2406 214.5 55.5926 214.592 56.0486 214.592C56.2806 214.592 56.5166 214.56 56.7566 214.496C56.9966 214.432 57.2166 214.332 57.4166 214.196C57.6246 214.052 57.7886 213.876 57.9086 213.668C58.0286 213.452 58.0886 213.192 58.0886 212.888V211.052ZM60.9323 215V209H61.4723L61.5203 210.5L61.4243 210.416C61.5363 210.088 61.7043 209.812 61.9283 209.588C62.1523 209.356 62.4203 209.18 62.7323 209.06C63.0443 208.94 63.3803 208.88 63.7403 208.88C64.1883 208.88 64.5843 208.964 64.9283 209.132C65.2723 209.3 65.5403 209.548 65.7323 209.876C65.9323 210.204 66.0323 210.616 66.0323 211.112V215H65.4323V211.304C65.4323 210.648 65.2683 210.168 64.9403 209.864C64.6203 209.56 64.2003 209.408 63.6803 209.408C63.3043 209.408 62.9523 209.496 62.6243 209.672C62.3043 209.84 62.0403 210.088 61.8323 210.416C61.6323 210.744 61.5323 211.144 61.5323 211.616V215H60.9323ZM74.3139 215.12C73.7619 215.12 73.2699 214.996 72.8379 214.748C72.4059 214.5 72.0659 214.144 71.8179 213.68C71.5779 213.208 71.4579 212.648 71.4579 212C71.4579 211.352 71.5779 210.796 71.8179 210.332C72.0659 209.86 72.3979 209.5 72.8139 209.252C73.2299 209.004 73.7059 208.88 74.2419 208.88C74.7859 208.88 75.2499 209 75.6339 209.24C76.0179 209.48 76.3139 209.816 76.5219 210.248C76.7299 210.672 76.8339 211.164 76.8339 211.724C76.8339 211.796 76.8299 211.868 76.8219 211.94C76.8219 212.004 76.8179 212.064 76.8099 212.12H71.8299V211.58H76.5459L76.2459 211.664C76.2379 210.976 76.0539 210.428 75.6939 210.02C75.3419 209.612 74.8539 209.408 74.2299 209.408C73.7979 209.408 73.4179 209.512 73.0899 209.72C72.7619 209.92 72.5059 210.216 72.3219 210.608C72.1379 210.992 72.0459 211.456 72.0459 212C72.0459 212.536 72.1379 213 72.3219 213.392C72.5139 213.784 72.7779 214.084 73.1139 214.292C73.4579 214.492 73.8539 214.592 74.3019 214.592C74.7659 214.592 75.1619 214.492 75.4899 214.292C75.8259 214.092 76.0859 213.816 76.2699 213.464L76.7499 213.74C76.6059 214.028 76.4139 214.276 76.1739 214.484C75.9339 214.684 75.6579 214.84 75.3459 214.952C75.0339 215.064 74.6899 215.12 74.3139 215.12ZM78.4309 209L80.4349 211.604L80.4949 211.688L83.0389 215H82.2829L80.1229 212.204L80.0509 212.108L77.6629 209H78.4309ZM82.8589 209L80.5309 212.06L80.4589 212.108L78.2629 215H77.5429L80.1109 211.676L80.1589 211.652L82.1389 209H82.8589ZM84.6698 207.836C84.5178 207.836 84.3938 207.792 84.2978 207.704C84.2098 207.608 84.1658 207.484 84.1658 207.332C84.1658 207.18 84.2098 207.06 84.2978 206.972C84.3938 206.876 84.5178 206.828 84.6698 206.828C84.8218 206.828 84.9418 206.876 85.0298 206.972C85.1258 207.06 85.1738 207.18 85.1738 207.332C85.1738 207.484 85.1258 207.608 85.0298 207.704C84.9418 207.792 84.8218 207.836 84.6698 207.836ZM84.9698 209V215H84.3698V209H84.9698ZM89.1282 215.12C88.5202 215.12 87.9802 214.996 87.5082 214.748C87.0442 214.5 86.7162 214.144 86.5242 213.68L87.0402 213.332C87.1842 213.732 87.4402 214.044 87.8082 214.268C88.1842 214.484 88.6402 214.592 89.1762 214.592C89.7042 214.592 90.1162 214.488 90.4122 214.28C90.7162 214.072 90.8682 213.796 90.8682 213.452C90.8682 213.22 90.7922 213.02 90.6402 212.852C90.4962 212.676 90.2202 212.544 89.8122 212.456L88.4082 212.156C87.8322 212.036 87.4202 211.844 87.1722 211.58C86.9322 211.308 86.8122 210.98 86.8122 210.596C86.8122 210.276 86.9082 209.988 87.1002 209.732C87.2922 209.476 87.5562 209.272 87.8922 209.12C88.2362 208.96 88.6362 208.88 89.0922 208.88C89.6922 208.88 90.1882 209 90.5802 209.24C90.9722 209.472 91.2482 209.824 91.4082 210.296L90.9042 210.62C90.7842 210.196 90.5602 209.888 90.2322 209.696C89.9122 209.504 89.5322 209.408 89.0922 209.408C88.7562 209.408 88.4602 209.46 88.2042 209.564C87.9562 209.66 87.7602 209.796 87.6162 209.972C87.4802 210.14 87.4122 210.336 87.4122 210.56C87.4122 210.792 87.4922 211.004 87.6522 211.196C87.8122 211.38 88.0962 211.516 88.5042 211.604L89.9442 211.916C90.5122 212.036 90.9082 212.22 91.1322 212.468C91.3562 212.708 91.4682 213.008 91.4682 213.368C91.4682 213.728 91.3722 214.04 91.1802 214.304C90.9882 214.568 90.7162 214.772 90.3642 214.916C90.0122 215.052 89.6002 215.12 89.1282 215.12ZM94.1431 207.332V213.416C94.1431 213.792 94.2311 214.08 94.4071 214.28C94.5911 214.472 94.8551 214.568 95.1991 214.568C95.4231 214.568 95.6191 214.532 95.7871 214.46C95.9631 214.38 96.1191 214.268 96.2551 214.124L96.4831 214.616C96.3311 214.768 96.1391 214.892 95.9071 214.988C95.6751 215.076 95.4151 215.12 95.1271 215.12C94.8151 215.12 94.5391 215.064 94.2991 214.952C94.0591 214.832 93.8711 214.652 93.7351 214.412C93.6071 214.172 93.5431 213.868 93.5431 213.5V207.5L94.1431 207.332ZM96.3871 209V209.516H92.3431V209H96.3871ZM97.9705 207.836C97.8185 207.836 97.6945 207.792 97.5985 207.704C97.5105 207.608 97.4665 207.484 97.4665 207.332C97.4665 207.18 97.5105 207.06 97.5985 206.972C97.6945 206.876 97.8185 206.828 97.9705 206.828C98.1225 206.828 98.2425 206.876 98.3305 206.972C98.4265 207.06 98.4745 207.18 98.4745 207.332C98.4745 207.484 98.4265 207.608 98.3305 207.704C98.2425 207.792 98.1225 207.836 97.9705 207.836ZM98.2705 209V215H97.6705V209H98.2705ZM100.401 215V209H100.941L100.989 210.5L100.893 210.416C101.005 210.088 101.173 209.812 101.397 209.588C101.621 209.356 101.889 209.18 102.201 209.06C102.513 208.94 102.849 208.88 103.209 208.88C103.657 208.88 104.053 208.964 104.397 209.132C104.741 209.3 105.009 209.548 105.201 209.876C105.401 210.204 105.501 210.616 105.501 211.112V215H104.901V211.304C104.901 210.648 104.737 210.168 104.409 209.864C104.089 209.56 103.669 209.408 103.149 209.408C102.773 209.408 102.421 209.496 102.093 209.672C101.773 209.84 101.509 210.088 101.301 210.416C101.101 210.744 101.001 211.144 101.001 211.616V215H100.401ZM112.541 207.896L112.685 208.424C112.677 208.424 112.669 208.424 112.661 208.424C112.653 208.424 112.641 208.424 112.625 208.424C112.233 208.424 111.929 208.528 111.713 208.736C111.505 208.936 111.401 209.22 111.401 209.588L111.017 209.396C111.017 209.092 111.081 208.828 111.209 208.604C111.337 208.38 111.513 208.208 111.737 208.088C111.961 207.96 112.213 207.896 112.493 207.896C112.509 207.896 112.517 207.896 112.517 207.896C112.525 207.896 112.533 207.896 112.541 207.896ZM110.645 214.388C111.237 214.388 111.701 214.512 112.037 214.76C112.373 215.008 112.541 215.34 112.541 215.756C112.541 216.124 112.417 216.444 112.169 216.716C111.929 216.988 111.597 217.2 111.173 217.352C110.749 217.504 110.265 217.58 109.721 217.58C108.817 217.58 108.125 217.424 107.645 217.112C107.165 216.808 106.925 216.424 106.925 215.96C106.925 215.624 107.045 215.332 107.285 215.084C107.533 214.836 107.893 214.688 108.365 214.64L108.317 214.748C108.061 214.676 107.833 214.556 107.633 214.388C107.441 214.22 107.345 213.98 107.345 213.668C107.345 213.332 107.469 213.06 107.717 212.852C107.973 212.636 108.309 212.512 108.725 212.48L109.361 212.696H109.109C108.741 212.72 108.445 212.812 108.221 212.972C108.005 213.124 107.897 213.324 107.897 213.572C107.897 213.844 108.001 214.048 108.209 214.184C108.425 214.32 108.697 214.388 109.025 214.388H110.645ZM109.721 217.076C110.193 217.076 110.597 217.02 110.933 216.908C111.269 216.796 111.525 216.644 111.701 216.452C111.885 216.268 111.977 216.06 111.977 215.828C111.977 215.548 111.853 215.324 111.605 215.156C111.365 214.988 110.997 214.904 110.501 214.904H108.797C108.421 214.904 108.109 214.992 107.861 215.168C107.613 215.344 107.489 215.58 107.489 215.876C107.489 216.236 107.685 216.524 108.077 216.74C108.477 216.964 109.025 217.076 109.721 217.076ZM109.637 208.88C110.109 208.88 110.525 208.964 110.885 209.132C111.253 209.292 111.537 209.52 111.737 209.816C111.937 210.104 112.037 210.444 112.037 210.836C112.037 211.22 111.937 211.564 111.737 211.868C111.537 212.164 111.253 212.396 110.885 212.564C110.525 212.724 110.109 212.804 109.637 212.804C108.877 212.804 108.281 212.624 107.849 212.264C107.425 211.896 107.213 211.42 107.213 210.836C107.213 210.444 107.313 210.104 107.513 209.816C107.721 209.52 108.005 209.292 108.365 209.132C108.733 208.964 109.157 208.88 109.637 208.88ZM109.637 209.372C109.109 209.372 108.677 209.508 108.341 209.78C108.005 210.044 107.837 210.396 107.837 210.836C107.837 211.276 108.005 211.632 108.341 211.904C108.677 212.176 109.109 212.312 109.637 212.312C110.165 212.312 110.593 212.176 110.921 211.904C111.257 211.632 111.425 211.276 111.425 210.836C111.425 210.396 111.257 210.044 110.921 209.78C110.593 209.508 110.165 209.372 109.637 209.372ZM122.762 207.08V207.632H119.87V215H119.27V207.632H116.378V207.08H122.762ZM126.514 211.052C126.514 210.532 126.374 210.128 126.094 209.84C125.814 209.552 125.414 209.408 124.894 209.408C124.438 209.408 124.046 209.508 123.718 209.708C123.39 209.9 123.146 210.224 122.986 210.68L122.494 210.368C122.67 209.896 122.962 209.532 123.37 209.276C123.786 209.012 124.298 208.88 124.906 208.88C125.346 208.88 125.73 208.96 126.058 209.12C126.394 209.272 126.654 209.5 126.838 209.804C127.022 210.108 127.114 210.488 127.114 210.944V213.944C127.114 214.368 127.306 214.58 127.69 214.58C127.858 214.58 128.002 214.552 128.122 214.496L128.086 214.976C127.95 215.048 127.774 215.084 127.558 215.084C127.374 215.084 127.202 215.048 127.042 214.976C126.882 214.904 126.75 214.784 126.646 214.616C126.55 214.448 126.502 214.22 126.502 213.932V213.608L126.67 213.596C126.598 213.94 126.438 214.228 126.19 214.46C125.95 214.684 125.67 214.852 125.35 214.964C125.03 215.068 124.71 215.12 124.39 215.12C124.014 215.12 123.678 215.06 123.382 214.94C123.086 214.82 122.854 214.648 122.686 214.424C122.518 214.192 122.434 213.908 122.434 213.572C122.434 213.124 122.582 212.764 122.878 212.492C123.182 212.212 123.606 212.02 124.15 211.916L126.634 211.424V211.928L124.45 212.36C123.978 212.456 123.626 212.596 123.394 212.78C123.162 212.964 123.046 213.216 123.046 213.536C123.046 213.864 123.17 214.124 123.418 214.316C123.666 214.5 124.018 214.592 124.474 214.592C124.706 214.592 124.942 214.56 125.182 214.496C125.422 214.432 125.642 214.332 125.842 214.196C126.05 214.052 126.214 213.876 126.334 213.668C126.454 213.452 126.514 213.192 126.514 212.888V211.052ZM131.386 215.12C130.778 215.12 130.238 214.996 129.766 214.748C129.302 214.5 128.974 214.144 128.782 213.68L129.298 213.332C129.442 213.732 129.698 214.044 130.066 214.268C130.442 214.484 130.898 214.592 131.434 214.592C131.962 214.592 132.374 214.488 132.67 214.28C132.974 214.072 133.126 213.796 133.126 213.452C133.126 213.22 133.05 213.02 132.898 212.852C132.754 212.676 132.478 212.544 132.07 212.456L130.666 212.156C130.09 212.036 129.678 211.844 129.43 211.58C129.19 211.308 129.07 210.98 129.07 210.596C129.07 210.276 129.166 209.988 129.358 209.732C129.55 209.476 129.814 209.272 130.15 209.12C130.494 208.96 130.894 208.88 131.35 208.88C131.95 208.88 132.446 209 132.838 209.24C133.23 209.472 133.506 209.824 133.666 210.296L133.162 210.62C133.042 210.196 132.818 209.888 132.49 209.696C132.17 209.504 131.79 209.408 131.35 209.408C131.014 209.408 130.718 209.46 130.462 209.564C130.214 209.66 130.018 209.796 129.874 209.972C129.738 210.14 129.67 210.336 129.67 210.56C129.67 210.792 129.75 211.004 129.91 211.196C130.07 211.38 130.354 211.516 130.762 211.604L132.202 211.916C132.77 212.036 133.166 212.22 133.39 212.468C133.614 212.708 133.726 213.008 133.726 213.368C133.726 213.728 133.63 214.04 133.438 214.304C133.246 214.568 132.974 214.772 132.622 214.916C132.27 215.052 131.858 215.12 131.386 215.12ZM140.349 209L137.709 211.544L137.565 211.688L135.705 213.488V212.72L139.569 209H140.349ZM136.005 206.24V215H135.405V206.24H136.005ZM137.745 211.232L140.445 215H139.713L137.253 211.58L137.745 211.232ZM148.944 211.052C148.944 210.532 148.804 210.128 148.524 209.84C148.244 209.552 147.844 209.408 147.324 209.408C146.868 209.408 146.476 209.508 146.148 209.708C145.82 209.9 145.576 210.224 145.416 210.68L144.924 210.368C145.1 209.896 145.392 209.532 145.8 209.276C146.216 209.012 146.728 208.88 147.336 208.88C147.776 208.88 148.16 208.96 148.488 209.12C148.824 209.272 149.084 209.5 149.268 209.804C149.452 210.108 149.544 210.488 149.544 210.944V213.944C149.544 214.368 149.736 214.58 150.12 214.58C150.288 214.58 150.432 214.552 150.552 214.496L150.516 214.976C150.38 215.048 150.204 215.084 149.988 215.084C149.804 215.084 149.632 215.048 149.472 214.976C149.312 214.904 149.18 214.784 149.076 214.616C148.98 214.448 148.932 214.22 148.932 213.932V213.608L149.1 213.596C149.028 213.94 148.868 214.228 148.62 214.46C148.38 214.684 148.1 214.852 147.78 214.964C147.46 215.068 147.14 215.12 146.82 215.12C146.444 215.12 146.108 215.06 145.812 214.94C145.516 214.82 145.284 214.648 145.116 214.424C144.948 214.192 144.864 213.908 144.864 213.572C144.864 213.124 145.012 212.764 145.308 212.492C145.612 212.212 146.036 212.02 146.58 211.916L149.064 211.424V211.928L146.88 212.36C146.408 212.456 146.056 212.596 145.824 212.78C145.592 212.964 145.476 213.216 145.476 213.536C145.476 213.864 145.6 214.124 145.848 214.316C146.096 214.5 146.448 214.592 146.904 214.592C147.136 214.592 147.372 214.56 147.612 214.496C147.852 214.432 148.072 214.332 148.272 214.196C148.48 214.052 148.644 213.876 148.764 213.668C148.884 213.452 148.944 213.192 148.944 212.888V211.052ZM151.788 215V209H152.328L152.376 210.5L152.28 210.416C152.392 210.088 152.56 209.812 152.784 209.588C153.008 209.356 153.276 209.18 153.588 209.06C153.9 208.94 154.236 208.88 154.596 208.88C155.044 208.88 155.44 208.964 155.784 209.132C156.128 209.3 156.396 209.548 156.588 209.876C156.788 210.204 156.888 210.616 156.888 211.112V215H156.288V211.304C156.288 210.648 156.124 210.168 155.796 209.864C155.476 209.56 155.056 209.408 154.536 209.408C154.16 209.408 153.808 209.496 153.48 209.672C153.16 209.84 152.896 210.088 152.688 210.416C152.488 210.744 152.388 211.144 152.388 211.616V215H151.788ZM161.3 215.12C160.78 215.12 160.312 214.996 159.896 214.748C159.48 214.5 159.152 214.144 158.912 213.68C158.68 213.208 158.564 212.648 158.564 212C158.564 211.336 158.688 210.772 158.936 210.308C159.184 209.844 159.52 209.492 159.944 209.252C160.368 209.004 160.836 208.88 161.348 208.88C161.908 208.88 162.384 209.028 162.776 209.324C163.176 209.62 163.444 210.032 163.58 210.56L163.508 210.608V206.24H164.108V215H163.568L163.532 213.332L163.604 213.308C163.532 213.692 163.384 214.02 163.16 214.292C162.944 214.564 162.672 214.772 162.344 214.916C162.024 215.052 161.676 215.12 161.3 215.12ZM161.372 214.592C161.796 214.592 162.168 214.488 162.488 214.28C162.808 214.064 163.056 213.756 163.232 213.356C163.416 212.956 163.508 212.488 163.508 211.952C163.508 211.424 163.416 210.972 163.232 210.596C163.056 210.212 162.808 209.92 162.488 209.72C162.176 209.512 161.812 209.408 161.396 209.408C160.708 209.408 160.164 209.64 159.764 210.104C159.364 210.568 159.164 211.2 159.164 212C159.164 212.8 159.36 213.432 159.752 213.896C160.152 214.36 160.692 214.592 161.372 214.592ZM172.35 215.12C171.83 215.12 171.362 214.996 170.946 214.748C170.53 214.5 170.202 214.144 169.962 213.68C169.73 213.208 169.614 212.648 169.614 212C169.614 211.336 169.738 210.772 169.986 210.308C170.234 209.844 170.57 209.492 170.994 209.252C171.418 209.004 171.886 208.88 172.398 208.88C172.958 208.88 173.434 209.028 173.826 209.324C174.226 209.62 174.494 210.032 174.63 210.56L174.558 210.608V206.24H175.158V215H174.618L174.582 213.332L174.654 213.308C174.582 213.692 174.434 214.02 174.21 214.292C173.994 214.564 173.722 214.772 173.394 214.916C173.074 215.052 172.726 215.12 172.35 215.12ZM172.422 214.592C172.846 214.592 173.218 214.488 173.538 214.28C173.858 214.064 174.106 213.756 174.282 213.356C174.466 212.956 174.558 212.488 174.558 211.952C174.558 211.424 174.466 210.972 174.282 210.596C174.106 210.212 173.858 209.92 173.538 209.72C173.226 209.512 172.862 209.408 172.446 209.408C171.758 209.408 171.214 209.64 170.814 210.104C170.414 210.568 170.214 211.2 170.214 212C170.214 212.8 170.41 213.432 170.802 213.896C171.202 214.36 171.742 214.592 172.422 214.592ZM177.299 215V209H177.803L177.875 210.26C178.027 209.836 178.271 209.5 178.607 209.252C178.943 209.004 179.347 208.88 179.819 208.88C179.979 208.88 180.123 208.896 180.251 208.928C180.379 208.96 180.483 209.012 180.563 209.084L180.431 209.612C180.343 209.556 180.247 209.512 180.143 209.48C180.039 209.448 179.883 209.432 179.675 209.432C179.371 209.432 179.083 209.528 178.811 209.72C178.539 209.904 178.319 210.164 178.151 210.5C177.983 210.828 177.899 211.208 177.899 211.64V215H177.299ZM184.001 208.88C184.561 208.88 185.053 209.004 185.477 209.252C185.909 209.5 186.245 209.86 186.485 210.332C186.733 210.796 186.857 211.352 186.857 212C186.857 212.648 186.733 213.208 186.485 213.68C186.245 214.144 185.909 214.5 185.477 214.748C185.053 214.996 184.561 215.12 184.001 215.12C183.441 215.12 182.945 214.996 182.513 214.748C182.089 214.5 181.753 214.144 181.505 213.68C181.265 213.208 181.145 212.648 181.145 212C181.145 211.352 181.265 210.796 181.505 210.332C181.753 209.86 182.089 209.5 182.513 209.252C182.945 209.004 183.441 208.88 184.001 208.88ZM184.001 209.396C183.545 209.396 183.149 209.5 182.813 209.708C182.477 209.916 182.213 210.216 182.021 210.608C181.837 210.992 181.745 211.456 181.745 212C181.745 212.536 181.837 213 182.021 213.392C182.213 213.784 182.477 214.084 182.813 214.292C183.149 214.5 183.545 214.604 184.001 214.604C184.457 214.604 184.853 214.5 185.189 214.292C185.525 214.084 185.785 213.784 185.969 213.392C186.161 213 186.257 212.536 186.257 212C186.257 211.456 186.161 210.992 185.969 210.608C185.785 210.216 185.525 209.916 185.189 209.708C184.853 209.5 184.457 209.396 184.001 209.396ZM188.573 217.52V209H189.113L189.161 210.668L189.077 210.572C189.181 210.228 189.341 209.928 189.557 209.672C189.781 209.416 190.053 209.22 190.373 209.084C190.693 208.948 191.041 208.88 191.417 208.88C191.929 208.88 192.389 209.004 192.797 209.252C193.205 209.5 193.529 209.856 193.769 210.32C194.009 210.784 194.129 211.344 194.129 212C194.129 212.648 194.009 213.208 193.769 213.68C193.529 214.144 193.201 214.5 192.785 214.748C192.377 214.996 191.913 215.12 191.393 215.12C190.841 215.12 190.361 214.976 189.953 214.688C189.545 214.392 189.261 213.996 189.101 213.5L189.173 213.392V217.52H188.573ZM191.321 214.592C192.001 214.592 192.537 214.36 192.929 213.896C193.329 213.432 193.529 212.8 193.529 212C193.529 211.2 193.333 210.568 192.941 210.104C192.549 209.64 192.017 209.408 191.345 209.408C190.921 209.408 190.545 209.516 190.217 209.732C189.897 209.94 189.641 210.24 189.449 210.632C189.265 211.016 189.173 211.472 189.173 212C189.173 212.52 189.265 212.976 189.449 213.368C189.633 213.76 189.885 214.064 190.205 214.28C190.533 214.488 190.905 214.592 191.321 214.592ZM199.924 207.836C199.772 207.836 199.648 207.792 199.552 207.704C199.464 207.608 199.42 207.484 199.42 207.332C199.42 207.18 199.464 207.06 199.552 206.972C199.648 206.876 199.772 206.828 199.924 206.828C200.076 206.828 200.196 206.876 200.284 206.972C200.38 207.06 200.428 207.18 200.428 207.332C200.428 207.484 200.38 207.608 200.284 207.704C200.196 207.792 200.076 207.836 199.924 207.836ZM200.224 209V215H199.624V209H200.224ZM203.35 207.332V213.416C203.35 213.792 203.438 214.08 203.614 214.28C203.798 214.472 204.062 214.568 204.406 214.568C204.63 214.568 204.826 214.532 204.994 214.46C205.17 214.38 205.326 214.268 205.462 214.124L205.69 214.616C205.538 214.768 205.346 214.892 205.114 214.988C204.882 215.076 204.622 215.12 204.334 215.12C204.022 215.12 203.746 215.064 203.506 214.952C203.266 214.832 203.078 214.652 202.942 214.412C202.814 214.172 202.75 213.868 202.75 213.5V207.5L203.35 207.332ZM205.594 209V209.516H201.55V209H205.594ZM212.693 215.12C212.277 215.12 211.905 215.044 211.577 214.892C211.249 214.74 210.989 214.504 210.797 214.184C210.613 213.856 210.521 213.448 210.521 212.96V209H211.121V212.816C211.121 213.44 211.269 213.892 211.565 214.172C211.869 214.452 212.293 214.592 212.837 214.592C213.157 214.592 213.445 214.536 213.701 214.424C213.965 214.312 214.189 214.156 214.373 213.956C214.557 213.756 214.697 213.528 214.793 213.272C214.897 213.016 214.949 212.74 214.949 212.444V209H215.549V215H215.009L214.985 213.764C214.809 214.188 214.521 214.52 214.121 214.76C213.721 215 213.245 215.12 212.693 215.12ZM217.682 215V209H218.222L218.27 210.5L218.174 210.416C218.286 210.088 218.454 209.812 218.678 209.588C218.902 209.356 219.17 209.18 219.482 209.06C219.794 208.94 220.13 208.88 220.49 208.88C220.938 208.88 221.334 208.964 221.678 209.132C222.022 209.3 222.29 209.548 222.482 209.876C222.682 210.204 222.782 210.616 222.782 211.112V215H222.182V211.304C222.182 210.648 222.018 210.168 221.69 209.864C221.37 209.56 220.95 209.408 220.43 209.408C220.054 209.408 219.702 209.496 219.374 209.672C219.054 209.84 218.79 210.088 218.582 210.416C218.382 210.744 218.282 211.144 218.282 211.616V215H217.682ZM227.194 215.12C226.674 215.12 226.206 214.996 225.79 214.748C225.374 214.5 225.046 214.144 224.806 213.68C224.574 213.208 224.458 212.648 224.458 212C224.458 211.336 224.582 210.772 224.83 210.308C225.078 209.844 225.414 209.492 225.838 209.252C226.262 209.004 226.73 208.88 227.242 208.88C227.802 208.88 228.278 209.028 228.67 209.324C229.07 209.62 229.338 210.032 229.474 210.56L229.402 210.608V206.24H230.002V215H229.462L229.426 213.332L229.498 213.308C229.426 213.692 229.278 214.02 229.054 214.292C228.838 214.564 228.566 214.772 228.238 214.916C227.918 215.052 227.57 215.12 227.194 215.12ZM227.266 214.592C227.69 214.592 228.062 214.488 228.382 214.28C228.702 214.064 228.95 213.756 229.126 213.356C229.31 212.956 229.402 212.488 229.402 211.952C229.402 211.424 229.31 210.972 229.126 210.596C228.95 210.212 228.702 209.92 228.382 209.72C228.07 209.512 227.706 209.408 227.29 209.408C226.602 209.408 226.058 209.64 225.658 210.104C225.258 210.568 225.058 211.2 225.058 212C225.058 212.8 225.254 213.432 225.646 213.896C226.046 214.36 226.586 214.592 227.266 214.592ZM234.591 215.12C234.039 215.12 233.547 214.996 233.115 214.748C232.683 214.5 232.343 214.144 232.095 213.68C231.855 213.208 231.735 212.648 231.735 212C231.735 211.352 231.855 210.796 232.095 210.332C232.343 209.86 232.675 209.5 233.091 209.252C233.507 209.004 233.983 208.88 234.519 208.88C235.063 208.88 235.527 209 235.911 209.24C236.295 209.48 236.591 209.816 236.799 210.248C237.007 210.672 237.111 211.164 237.111 211.724C237.111 211.796 237.107 211.868 237.099 211.94C237.099 212.004 237.095 212.064 237.087 212.12H232.107V211.58H236.823L236.523 211.664C236.515 210.976 236.331 210.428 235.971 210.02C235.619 209.612 235.131 209.408 234.507 209.408C234.075 209.408 233.695 209.512 233.367 209.72C233.039 209.92 232.783 210.216 232.599 210.608C232.415 210.992 232.323 211.456 232.323 212C232.323 212.536 232.415 213 232.599 213.392C232.791 213.784 233.055 214.084 233.391 214.292C233.735 214.492 234.131 214.592 234.579 214.592C235.043 214.592 235.439 214.492 235.767 214.292C236.103 214.092 236.363 213.816 236.547 213.464L237.027 213.74C236.883 214.028 236.691 214.276 236.451 214.484C236.211 214.684 235.935 214.84 235.623 214.952C235.311 215.064 234.967 215.12 234.591 215.12ZM238.823 215V209H239.327L239.399 210.26C239.551 209.836 239.795 209.5 240.131 209.252C240.467 209.004 240.871 208.88 241.343 208.88C241.503 208.88 241.647 208.896 241.775 208.928C241.903 208.96 242.007 209.012 242.087 209.084L241.955 209.612C241.867 209.556 241.771 209.512 241.667 209.48C241.563 209.448 241.407 209.432 241.199 209.432C240.895 209.432 240.607 209.528 240.335 209.72C240.063 209.904 239.843 210.164 239.675 210.5C239.507 210.828 239.423 211.208 239.423 211.64V215H238.823ZM99.106 221.332V227.416C99.106 227.792 99.194 228.08 99.37 228.28C99.554 228.472 99.818 228.568 100.162 228.568C100.386 228.568 100.582 228.532 100.75 228.46C100.926 228.38 101.082 228.268 101.218 228.124L101.446 228.616C101.294 228.768 101.102 228.892 100.87 228.988C100.638 229.076 100.378 229.12 100.09 229.12C99.778 229.12 99.502 229.064 99.262 228.952C99.022 228.832 98.834 228.652 98.698 228.412C98.57 228.172 98.506 227.868 98.506 227.5V221.5L99.106 221.332ZM101.35 223V223.516H97.306V223H101.35ZM102.633 229V220.24H103.233V224.224C103.409 223.8 103.693 223.472 104.085 223.24C104.477 223 104.929 222.88 105.441 222.88C105.889 222.88 106.285 222.964 106.629 223.132C106.973 223.292 107.241 223.54 107.433 223.876C107.633 224.204 107.733 224.612 107.733 225.1V229H107.133V225.292C107.133 224.644 106.969 224.168 106.641 223.864C106.321 223.552 105.901 223.396 105.381 223.396C105.005 223.396 104.653 223.484 104.325 223.66C104.005 223.836 103.741 224.088 103.533 224.416C103.333 224.744 103.233 225.144 103.233 225.616V229H102.633ZM110.105 221.836C109.953 221.836 109.829 221.792 109.733 221.704C109.645 221.608 109.601 221.484 109.601 221.332C109.601 221.18 109.645 221.06 109.733 220.972C109.829 220.876 109.953 220.828 110.105 220.828C110.257 220.828 110.377 220.876 110.465 220.972C110.561 221.06 110.609 221.18 110.609 221.332C110.609 221.484 110.561 221.608 110.465 221.704C110.377 221.792 110.257 221.836 110.105 221.836ZM110.405 223V229H109.805V223H110.405ZM114.564 229.12C113.956 229.12 113.416 228.996 112.944 228.748C112.48 228.5 112.152 228.144 111.96 227.68L112.476 227.332C112.62 227.732 112.876 228.044 113.244 228.268C113.62 228.484 114.076 228.592 114.612 228.592C115.14 228.592 115.552 228.488 115.848 228.28C116.152 228.072 116.304 227.796 116.304 227.452C116.304 227.22 116.228 227.02 116.076 226.852C115.932 226.676 115.656 226.544 115.248 226.456L113.844 226.156C113.268 226.036 112.856 225.844 112.608 225.58C112.368 225.308 112.248 224.98 112.248 224.596C112.248 224.276 112.344 223.988 112.536 223.732C112.728 223.476 112.992 223.272 113.328 223.12C113.672 222.96 114.072 222.88 114.528 222.88C115.128 222.88 115.624 223 116.016 223.24C116.408 223.472 116.684 223.824 116.844 224.296L116.34 224.62C116.22 224.196 115.996 223.888 115.668 223.696C115.348 223.504 114.968 223.408 114.528 223.408C114.192 223.408 113.896 223.46 113.64 223.564C113.392 223.66 113.196 223.796 113.052 223.972C112.916 224.14 112.848 224.336 112.848 224.56C112.848 224.792 112.928 225.004 113.088 225.196C113.248 225.38 113.532 225.516 113.94 225.604L115.38 225.916C115.948 226.036 116.344 226.22 116.568 226.468C116.792 226.708 116.904 227.008 116.904 227.368C116.904 227.728 116.808 228.04 116.616 228.304C116.424 228.568 116.152 228.772 115.8 228.916C115.448 229.052 115.036 229.12 114.564 229.12ZM124.768 222.88C125.176 222.88 125.54 222.944 125.86 223.072C126.18 223.2 126.452 223.384 126.676 223.624C126.9 223.864 127.072 224.156 127.192 224.5L126.628 224.764C126.5 224.332 126.276 224 125.956 223.768C125.644 223.528 125.244 223.408 124.756 223.408C124.316 223.408 123.928 223.512 123.592 223.72C123.256 223.92 122.996 224.216 122.812 224.608C122.628 224.992 122.536 225.456 122.536 226C122.536 226.536 122.628 227 122.812 227.392C122.996 227.784 123.252 228.084 123.58 228.292C123.908 228.492 124.296 228.592 124.744 228.592C125.08 228.592 125.384 228.536 125.656 228.424C125.936 228.312 126.164 228.148 126.34 227.932C126.524 227.716 126.644 227.46 126.7 227.164L127.252 227.356C127.148 227.724 126.976 228.04 126.736 228.304C126.504 228.568 126.22 228.772 125.884 228.916C125.548 229.052 125.172 229.12 124.756 229.12C124.212 229.12 123.724 228.996 123.292 228.748C122.868 228.5 122.536 228.144 122.296 227.68C122.056 227.208 121.936 226.648 121.936 226C121.936 225.352 122.056 224.796 122.296 224.332C122.544 223.86 122.88 223.5 123.304 223.252C123.736 223.004 124.224 222.88 124.768 222.88ZM132.532 225.052C132.532 224.532 132.392 224.128 132.112 223.84C131.832 223.552 131.432 223.408 130.912 223.408C130.456 223.408 130.064 223.508 129.736 223.708C129.408 223.9 129.164 224.224 129.004 224.68L128.512 224.368C128.688 223.896 128.98 223.532 129.388 223.276C129.804 223.012 130.316 222.88 130.924 222.88C131.364 222.88 131.748 222.96 132.076 223.12C132.412 223.272 132.672 223.5 132.856 223.804C133.04 224.108 133.132 224.488 133.132 224.944V227.944C133.132 228.368 133.324 228.58 133.708 228.58C133.876 228.58 134.02 228.552 134.14 228.496L134.104 228.976C133.968 229.048 133.792 229.084 133.576 229.084C133.392 229.084 133.22 229.048 133.06 228.976C132.9 228.904 132.768 228.784 132.664 228.616C132.568 228.448 132.52 228.22 132.52 227.932V227.608L132.688 227.596C132.616 227.94 132.456 228.228 132.208 228.46C131.968 228.684 131.688 228.852 131.368 228.964C131.048 229.068 130.728 229.12 130.408 229.12C130.032 229.12 129.696 229.06 129.4 228.94C129.104 228.82 128.872 228.648 128.704 228.424C128.536 228.192 128.452 227.908 128.452 227.572C128.452 227.124 128.6 226.764 128.896 226.492C129.2 226.212 129.624 226.02 130.168 225.916L132.652 225.424V225.928L130.468 226.36C129.996 226.456 129.644 226.596 129.412 226.78C129.18 226.964 129.064 227.216 129.064 227.536C129.064 227.864 129.188 228.124 129.436 228.316C129.684 228.5 130.036 228.592 130.492 228.592C130.724 228.592 130.96 228.56 131.2 228.496C131.44 228.432 131.66 228.332 131.86 228.196C132.068 228.052 132.232 227.876 132.352 227.668C132.472 227.452 132.532 227.192 132.532 226.888V225.052ZM136.196 221.332V227.416C136.196 227.792 136.284 228.08 136.46 228.28C136.644 228.472 136.908 228.568 137.252 228.568C137.476 228.568 137.672 228.532 137.84 228.46C138.016 228.38 138.172 228.268 138.308 228.124L138.536 228.616C138.384 228.768 138.192 228.892 137.96 228.988C137.728 229.076 137.468 229.12 137.18 229.12C136.868 229.12 136.592 229.064 136.352 228.952C136.112 228.832 135.924 228.652 135.788 228.412C135.66 228.172 135.596 227.868 135.596 227.5V221.5L136.196 221.332ZM138.44 223V223.516H134.396V223H138.44ZM142.171 229.12C141.619 229.12 141.127 228.996 140.695 228.748C140.263 228.5 139.923 228.144 139.675 227.68C139.435 227.208 139.315 226.648 139.315 226C139.315 225.352 139.435 224.796 139.675 224.332C139.923 223.86 140.255 223.5 140.671 223.252C141.087 223.004 141.563 222.88 142.099 222.88C142.643 222.88 143.107 223 143.491 223.24C143.875 223.48 144.171 223.816 144.379 224.248C144.587 224.672 144.691 225.164 144.691 225.724C144.691 225.796 144.687 225.868 144.679 225.94C144.679 226.004 144.675 226.064 144.667 226.12H139.687V225.58H144.403L144.103 225.664C144.095 224.976 143.911 224.428 143.551 224.02C143.199 223.612 142.711 223.408 142.087 223.408C141.655 223.408 141.275 223.512 140.947 223.72C140.619 223.92 140.363 224.216 140.179 224.608C139.995 224.992 139.903 225.456 139.903 226C139.903 226.536 139.995 227 140.179 227.392C140.371 227.784 140.635 228.084 140.971 228.292C141.315 228.492 141.711 228.592 142.159 228.592C142.623 228.592 143.019 228.492 143.347 228.292C143.683 228.092 143.943 227.816 144.127 227.464L144.607 227.74C144.463 228.028 144.271 228.276 144.031 228.484C143.791 228.684 143.515 228.84 143.203 228.952C142.891 229.064 142.547 229.12 142.171 229.12ZM151.371 221.896L151.515 222.424C151.507 222.424 151.499 222.424 151.491 222.424C151.483 222.424 151.471 222.424 151.455 222.424C151.063 222.424 150.759 222.528 150.543 222.736C150.335 222.936 150.231 223.22 150.231 223.588L149.847 223.396C149.847 223.092 149.911 222.828 150.039 222.604C150.167 222.38 150.343 222.208 150.567 222.088C150.791 221.96 151.043 221.896 151.323 221.896C151.339 221.896 151.347 221.896 151.347 221.896C151.355 221.896 151.363 221.896 151.371 221.896ZM149.475 228.388C150.067 228.388 150.531 228.512 150.867 228.76C151.203 229.008 151.371 229.34 151.371 229.756C151.371 230.124 151.247 230.444 150.999 230.716C150.759 230.988 150.427 231.2 150.003 231.352C149.579 231.504 149.095 231.58 148.551 231.58C147.647 231.58 146.955 231.424 146.475 231.112C145.995 230.808 145.755 230.424 145.755 229.96C145.755 229.624 145.875 229.332 146.115 229.084C146.363 228.836 146.723 228.688 147.195 228.64L147.147 228.748C146.891 228.676 146.663 228.556 146.463 228.388C146.271 228.22 146.175 227.98 146.175 227.668C146.175 227.332 146.299 227.06 146.547 226.852C146.803 226.636 147.139 226.512 147.555 226.48L148.191 226.696H147.939C147.571 226.72 147.275 226.812 147.051 226.972C146.835 227.124 146.727 227.324 146.727 227.572C146.727 227.844 146.831 228.048 147.039 228.184C147.255 228.32 147.527 228.388 147.855 228.388H149.475ZM148.551 231.076C149.023 231.076 149.427 231.02 149.763 230.908C150.099 230.796 150.355 230.644 150.531 230.452C150.715 230.268 150.807 230.06 150.807 229.828C150.807 229.548 150.683 229.324 150.435 229.156C150.195 228.988 149.827 228.904 149.331 228.904H147.627C147.251 228.904 146.939 228.992 146.691 229.168C146.443 229.344 146.319 229.58 146.319 229.876C146.319 230.236 146.515 230.524 146.907 230.74C147.307 230.964 147.855 231.076 148.551 231.076ZM148.467 222.88C148.939 222.88 149.355 222.964 149.715 223.132C150.083 223.292 150.367 223.52 150.567 223.816C150.767 224.104 150.867 224.444 150.867 224.836C150.867 225.22 150.767 225.564 150.567 225.868C150.367 226.164 150.083 226.396 149.715 226.564C149.355 226.724 148.939 226.804 148.467 226.804C147.707 226.804 147.111 226.624 146.679 226.264C146.255 225.896 146.043 225.42 146.043 224.836C146.043 224.444 146.143 224.104 146.343 223.816C146.551 223.52 146.835 223.292 147.195 223.132C147.563 222.964 147.987 222.88 148.467 222.88ZM148.467 223.372C147.939 223.372 147.507 223.508 147.171 223.78C146.835 224.044 146.667 224.396 146.667 224.836C146.667 225.276 146.835 225.632 147.171 225.904C147.507 226.176 147.939 226.312 148.467 226.312C148.995 226.312 149.423 226.176 149.751 225.904C150.087 225.632 150.255 225.276 150.255 224.836C150.255 224.396 150.087 224.044 149.751 223.78C149.423 223.508 148.995 223.372 148.467 223.372ZM155.027 222.88C155.587 222.88 156.079 223.004 156.503 223.252C156.935 223.5 157.271 223.86 157.511 224.332C157.759 224.796 157.883 225.352 157.883 226C157.883 226.648 157.759 227.208 157.511 227.68C157.271 228.144 156.935 228.5 156.503 228.748C156.079 228.996 155.587 229.12 155.027 229.12C154.467 229.12 153.971 228.996 153.539 228.748C153.115 228.5 152.779 228.144 152.531 227.68C152.291 227.208 152.171 226.648 152.171 226C152.171 225.352 152.291 224.796 152.531 224.332C152.779 223.86 153.115 223.5 153.539 223.252C153.971 223.004 154.467 222.88 155.027 222.88ZM155.027 223.396C154.571 223.396 154.175 223.5 153.839 223.708C153.503 223.916 153.239 224.216 153.047 224.608C152.863 224.992 152.771 225.456 152.771 226C152.771 226.536 152.863 227 153.047 227.392C153.239 227.784 153.503 228.084 153.839 228.292C154.175 228.5 154.571 228.604 155.027 228.604C155.483 228.604 155.879 228.5 156.215 228.292C156.551 228.084 156.811 227.784 156.995 227.392C157.187 227 157.283 226.536 157.283 226C157.283 225.456 157.187 224.992 156.995 224.608C156.811 224.216 156.551 223.916 156.215 223.708C155.879 223.5 155.483 223.396 155.027 223.396ZM159.598 229V223H160.102L160.174 224.26C160.326 223.836 160.57 223.5 160.906 223.252C161.242 223.004 161.646 222.88 162.118 222.88C162.278 222.88 162.422 222.896 162.55 222.928C162.678 222.96 162.782 223.012 162.862 223.084L162.73 223.612C162.642 223.556 162.546 223.512 162.442 223.48C162.338 223.448 162.182 223.432 161.974 223.432C161.67 223.432 161.382 223.528 161.11 223.72C160.838 223.904 160.618 224.164 160.45 224.5C160.282 224.828 160.198 225.208 160.198 225.64V229H159.598ZM168.861 223L165.957 230.104C165.813 230.472 165.657 230.764 165.489 230.98C165.321 231.196 165.133 231.348 164.925 231.436C164.717 231.532 164.477 231.58 164.205 231.58C163.965 231.58 163.745 231.544 163.545 231.472C163.345 231.4 163.181 231.3 163.053 231.172L163.245 230.656C163.365 230.8 163.509 230.9 163.677 230.956C163.845 231.02 164.017 231.052 164.193 231.052C164.449 231.052 164.677 230.976 164.877 230.824C165.077 230.68 165.265 230.392 165.441 229.96L165.837 229L165.201 227.512L163.305 223H163.989L165.825 227.548L166.125 228.352L166.449 227.488L168.213 223H168.861Z"
                                            fill="#8C8C8C"
                                        />
                                        <rect
                                            width="121.456"
                                            height="68.9481"
                                            rx="2"
                                            transform="matrix(0.986032 0.166554 -0.157236 0.987561 141.907 85)"
                                            fill="#F9F9F9"
                                        />
                                        <path
                                            d="M203.883 136C181.877 168.667 123.883 214.4 67.9609 136"
                                            stroke="#8C8C8C"
                                        />
                                        <path
                                            d="M204.369 133.5C205.42 133.5 206.297 134.381 206.297 135.5C206.297 136.619 205.42 137.5 204.369 137.5C203.319 137.5 202.442 136.618 202.442 135.5C202.442 134.382 203.319 133.5 204.369 133.5Z"
                                            fill="#8C8C8C"
                                            stroke="#8C8C8C"
                                        />
                                    </svg>
                                )}
                            </KanbanBoard>
                        );
                    })}
                </div>
                <DragOverlay>
                    {draggedProjectId ? (
                        Array.isArray(data) &&
                            data.find(project => project.id.toString() === draggedProjectId) ? (
                            <div className="w-60 opacity-100">
                                <ProjectCard project={data.find(project => project.id.toString() === draggedProjectId)} />
                            </div>
                        ) : null
                    ) : null}
                </DragOverlay>
            </DndContext>
        </div>
    );
};

export default ProjectManagementKanban;
